# Optimus Clip Release Environment Variables
# ===========================================
# Copy this file to .env.local and fill in your values:
#   cp .env.local.template .env.local
#
# Then source before running release scripts:
#   source .env.local
#
# SECURITY: .env.local is in .gitignore - NEVER commit actual values
# See docs/RELEASE_PREREQUISITES.md for detailed setup instructions

# ----------------------------------------
# App Store Connect API (for notarization)
# ----------------------------------------
# Create key at: App Store Connect > Users and Access > Keys
# Download AuthKey_XXXX.p8 (one-time download, save securely!)

# 10-character alphanumeric key ID (e.g., AB12CD34EF)
export APP_STORE_CONNECT_KEY_ID=""

# UUID issuer ID from App Store Connect API Keys page
export APP_STORE_CONNECT_ISSUER_ID=""

# Base64-encoded .p8 file content (single line, no newlines)
# Generate with: base64 -i AuthKey_XXXX.p8 | tr -d '\n'
export APP_STORE_CONNECT_API_KEY_P8=""

# ----------------------------------------
# Sparkle Update Signing
# ----------------------------------------
# Generate with Sparkle's generate_keys tool or:
#   openssl genpkey -algorithm ed25519 -out sparkle_private_key.pem

# Path to ed25519 private key file for signing updates
# Store this file securely, outside of git repo
export SPARKLE_PRIVATE_KEY_FILE=""

# Alternatively, provide base64-encoded private key directly
# Generate with: base64 -i sparkle_private_key.pem | tr -d '\n'
# export SPARKLE_PRIVATE_KEY_B64=""

# ----------------------------------------
# Optional Overrides
# ----------------------------------------
# Developer ID certificate (auto-detected if not set)
# Format: "Developer ID Application: Your Name (TEAMID)"
# export DEVELOPER_ID_APPLICATION=""

# ----------------------------------------
# Verification Commands
# ----------------------------------------
# Run these to verify your setup:
#
# Check environment variables are set:
#   echo "KEY_ID: $APP_STORE_CONNECT_KEY_ID"
#   echo "ISSUER: $APP_STORE_CONNECT_ISSUER_ID"
#   [ -n "$APP_STORE_CONNECT_API_KEY_P8" ] && echo "API_KEY: (set)" || echo "API_KEY: (missing)"
#
# Check Sparkle key file exists:
#   [ -f "$SPARKLE_PRIVATE_KEY_FILE" ] && echo "Sparkle key: OK" || echo "Sparkle key: MISSING"
#
# Test notarytool authentication:
#   xcrun notarytool history --key-id "$APP_STORE_CONNECT_KEY_ID" \
#     --issuer "$APP_STORE_CONNECT_ISSUER_ID" \
#     --key <(echo "$APP_STORE_CONNECT_API_KEY_P8" | base64 -d)
